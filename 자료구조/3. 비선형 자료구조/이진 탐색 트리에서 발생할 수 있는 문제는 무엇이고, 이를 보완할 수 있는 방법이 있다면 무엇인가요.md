## 이진 탐색 트리에서 발생할 수 있는 문제는 무엇이고, 이를 보완할 수 있는 방법이 있다면 무엇인가요?

이진 탐색 트리에서 불균형이 발생하면 **시간 복잡도 면에서 효율적이지 못하다**는 문제점이 있습니다.

예를 들어, 트리가 한쪽으로 편향되어 있으면 O(n)의 시간 복잡도가 소요될 수 있습니다. 이를 보완하기 위해 등장한 방법이 **균형 이진 탐색 트리**입니다.

대표적인 예로, 레드-블랙 트리와 AVL 트리가 있습니다.

## 균형 이진 탐색 트리

- **삽입이나 삭제 연산을 수행해도 트리의 균형을 유지하는 트리**

- 이진 탐색 트리가 불균형인 경우 시간 복잡도에서 이점을 볼 수 없다는 단점을 보완한 트리
- 대표적인 예) 레드-블랙 트리, AVL 트리

### 1. 레드-블랙 트리(red-black tree)

- **노드가 검은색 또는 빨간색인 트리(여기선 파란색으로 표시)로, 정해진 규칙을 만족하면서 균형을 유지하는 트리**
  ![레드-블랙 트리](https://upload.wikimedia.org/wikipedia/commons/thumb/4/41/Red-black_tree_example_with_NIL.svg/1024px-Red-black_tree_example_with_NIL.svg.png)

- 이진 탐색 트리이면서 추가로 충족해야 하는 조건이 있음. 트리의 데이터에 대한 연산을 수행했을 때 다음 조건을 만족하지 못하면 회전과 색 변환을 해서 노드를 재배치해야 함.

- 조건

  - 모든 노드는 검은색 또는 빨간색이다.

  - 루트 노드는 검은색이다.
  - 모든 단말 노드(NIL)은 검은색이다. 단말 노드는 트리의 끝을 나타내며 값을 찾지 않는다.
  - 빨간색 노드의 자식 노드는 검은색이며 빨간색 노드가 연속으로 나올 수 없다.
  - **루트 노드에서 임의의 단말 노드까지 경로에 검은색 노드의 개수는 모두 같다.**

### 2. AVL 트리

- **자가 균형 이진 탐색 트리로, 왼쪽 서브 트리와 오른쪽 서브 트리의 높이 차이를 유지해 균형을 잡는 트리**

- 높이 차이를 알려면 **왼쪽 서브 트리의 높이에서 오른쪽 서브 트리의 높이를 뺀 값**인 **BF(Balance Factor)** 를 사용함

  - 왼쪽 서브 트리와 오른쪽 서브 트리의 높이 차이는 최대 1이다.

  - 왼쪽 서브 트리와 오른쪽 서브 트리의 높이 차이가 1보다 커지면 균형을 잡아 높이 차이를 줄인다.

- AVL 트리에는 LL, RR, LR, RL이라는 4가지 불균형 상황이 있다. 불균형 상황이면 트리를 회전해 균형을 유지한다. 오른쪽 회전은 해당 노드를 중심으로 시계 방향 회전을, 왼쪽 회전은 해당 노드를 중심으로 반시계 방향 회전을 의미한다.

  ### **AVL 트리의 4가지 불균형 상황**

  1. LL(Left Left) 불균형

     왼쪽으로 불균형을 이룰 경우에 가운데 노드를 중심으로 오른쪽으로 회전해서 균형을 맞춤

  2. RR(Right Right) 불균형

     오른쪽으로 불균형을 이룰 경우에 가운데 노드를 중심으로 왼쪽으로 회전해서 균형을 맞춤

  3. LR(Left Right) 불균형

     왼쪽, 오른쪽으로 불균형을 이룰 경우에 마지막 레벨에 위치한 노드를 중심으로 왼쪽으로 회전한 후 다시 오른쪽으로 회전해서 균형을 맞춤

  4. RL(Right Left) 불균형

     오른쪽, 왼쪽으로 불균형을 이룰 경우 마지막 레벨에 위치한 노드를 중심으로 오른쪽으로 회전한 후 왼쪽으로 회전해서 균형을 맞춤

- AVL 트리 모양이 궁금하다면 참고 : [[자료구조] AVL 트리(Tree)](https://yoongrammer.tistory.com/72)
